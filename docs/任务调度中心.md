# Screeps 房间任务调度中心设计文档

## 1. 系统概述
任务调度中心是一个以房间为单位的管理系统，负责协调和分配房间内的各项任务，优化 creep 的工作效率，实现资源的合理分配。

## 2. 核心功能

### 2.1 房间扫描
- **周期性扫描**
  - 定期扫描房间内的资源点（能量源、矿物等）
  - 检测建筑物状态（损坏程度、能量储存等）
  - 监控 creep 数量和状态
  - 检查房间防御状况

- **触发式扫描**
  - 遭受攻击时的紧急扫描
  - 新建筑完成时的环境扫描
  - 资源枯竭时的重新规划

### 2.2 任务类型
- **资源采集任务**
  - 能量采集
  - 矿物开采
  - 资源回收

- **建造任务**
  - 建筑施工
  - 道路铺设
  - 城墙建设

- **维护任务**
  - 建筑修复
  - 城墙加固
  - 道路维护

- **防御任务**
  - 巡逻警戒
  - 紧急防御
  - 支援增援

### 2.3 任务发布
- **任务优先级**
  - 紧急程度（1-5级）
  - 资源重要性
  - 时效性要求

- **任务属性**
  - 任务ID
  - 任务类型
  - 目标位置
  - 所需资源
  - 完成条件
  - 过期时间

### 2.4 任务分配
- **分配策略**
  - 基于 creep 角色能力
  - 考虑距离因素
  - 计算执行效率
  - 评估资源消耗

- **动态调整**
  - 任务优先级实时更新
  - creep 状态监控
  - 任务执行进度跟踪
  - 失败任务重新分配

## 3. 数据结构

### 3.1 任务对象